import{_ as v,P as g,a7 as r,D as h,E as _,b as i,M as l,N as p,F as c,R as x,G as w,J as T,O as N,T as b,U as K,Q as I,S as A}from "./index-653abdc5.js";import{P as C}from "./index-760c8618.js";import{k as B}from "./kana-74f6ec4e.js";import{N as E}from "./index-fec7bfd6.js";const F={name:"JpLearnTY",data(){return{kanaList:B,randomKanaList:[],audioPlayer:new Audio,target:{},rangeList:[],kanaType:0,rowNum:0,learnNum:0,kanaIndex:0}},mounted(){let e=this.$route.query;console.log("query",e),this.rowNum=Number(e.rowNum),this.kanaType=Number(e.kanaType),this.learnNum=5*this.rowNum,this.collectKana()},methods:{router(){return g},collectKana(){let e=this.kanaList,t=[];e.slice(0,this.rowNum).forEach(n=>{n.forEach(a=>{a.Hiragana&&t.push(a)})}),console.log(this.kanaType),t.forEach(n=>{this.kanaType===1||this.kanaType===3?n.kana=n.Hiragana:this.kanaType===2&&(n.kana=n.Katakana)}),t=r.shuffleArray(t),this.rangeList=t,this.next()},randomGetFourKana(){let{rangeList:e,target:t}=this,s=[];s.push(t);let n=()=>{let o=Math.floor(Math.random()*e.length);return e[o]},a=()=>{let o=n();s.includes(o)?a():s.push(o)};for(; s.length<4;)a();return s},next(){let{randomKanaList:e,rangeList:t,kanaIndex:s,learnNum:n}=this;s>=t.length?(console.log("全部完成"),this.kanaIndex+=1,r.showTips("全部完成 !","success"),setTimeout(()=>{g.back()},1e3)):(this.target=t[s],this.kanaIndex=s+1,e=this.randomGetFourKana(),this.randomKanaList=r.shuffleArray(e),this.playAudio())},playAudio(){let{audioPlayer:e,target:t}=this;e.src=t.audio,e.play().catch(s=>{r.showTips("首次请手动点击播放","success")})},clickKana(e){let{target:t}=this;e.Hiragana===t.Hiragana?(r.showNotify("回答正确","success"),r.showTips("前往下一个 !","loading"),setTimeout(()=>{this.next()},800)):(r.showTips("答错咯","fail"),this.playAudio())}}},u= e=>(b("data-v-bbe86de6"),e=e(),K(),e),J={class:"JpLearn"},P=u(()=>l("div",{class:"form-title"},null,-1)),S=u(()=>l("div",{class:"form-title"},null,-1)),G={class:"step-Line"},H=u(()=>l("div",{class:"form-title"},null,-1)),q={class:"step-text"},M=u(()=>l("div",{class:"form-title"},null,-1)),V={class:"alias-layout"},Y=["onClick"];function j(e, t, s, n, a, o){const k=E,y=C,m=I,f=x,L=A;return h(),_("div",J,[i(k,{title:"假名听音","left-text":"返回","left-arrow":"",onClickLeft:t[0]||(t[0]= d=>o.router().back())}),P,S,l("div",G,[i(y,{inactive:"",percentage:((a.kanaIndex-1)/a.rangeList.length*100).toFixed(2)},null,8,["percentage"])]),H,l("div",q,p(a.kanaIndex>a.rangeList.length?a.rangeList.length:a.kanaIndex)+"/"+p(a.rangeList.length),1),M,i(f,{justify:"center"},{default:c(()=>[i(m,null,{default:c(()=>[l("div",V,[(h(!0),_(w,null,T(a.randomKanaList,(d, D)=>(h(),_("div",{class:"alias-text",onClick: R=>o.clickKana(d)},p(d.kana),9,Y))),256))])]),_:1})]),_:1}),i(f,{class:"lock-to-bottom",justify:"center",gutter:"100"},{default:c(()=>[i(m,{onClick:o.playAudio},{default:c(()=>[i(L,{round:"",type:"success",size:"large",class:"lock-to-bottom"},{default:c(()=>[N("重听")]),_:1})]),_:1},8,["onClick"])]),_:1})])}const W=v(F,[["render",j],["__scopeId","data-v-bbe86de6"]]);export{W as default};
