import{c as O,g as S,ab as I,t as j,d as M,r as V,a3 as $,b as l,p as C,k as G,A as K,f as q,_ as J,a7 as y,ae as Y,D as i,E as u,M as d,F as z,G as E,J as T,N as H}from "./index-653abdc5.js";import{I as Q}from "./index-0c7160c6.js";import{T as W}from "./TabBar-580e9ef9.js";import{f as w,u as X,F as Z}from "./index-31b7a3a6.js";import"./index-a75c5c9e.js";const[ee,h,ae]=O("search"),te=S({},w,{label:String,shape:I("square"),leftIcon:I("search"),clearable:j,actionText:String,background:String,showAction:Boolean});var oe=M({name:ee,props:te,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(o, {emit:e,slots:s,attrs:n}){const t=X(),c=V(),_=()=>{s.action||(e("update:modelValue",""),e("cancel"))},g= a=>{a.keyCode===13&&(K(a),e("search",o.modelValue))},f=()=>o.id||`${t}-input`,r=()=>{if(s.label||o.label)return l("label",{class:h("label"),for:f(),"data-allow-mismatch":"attribute"},[s.label?s.label():o.label])},m=()=>{if(o.showAction){const a=o.actionText||ae("cancel");return l("div",{class:h("action"),role:"button",tabindex:0,onClick:_},[s.action?s.action():a])}},v=()=>{var a;return(a=c.value)==null?void 0:a.blur()},R=()=>{var a;return(a=c.value)==null?void 0:a.focus()},B= a=>e("blur",a),D= a=>e("focus",a),L= a=>e("clear",a),x= a=>e("clickInput",a),A= a=>e("clickLeftIcon",a),F= a=>e("clickRightIcon",a),N=Object.keys(w),U=()=>{const a=S({},n,C(o,N),{id:f()}),k= P=>e("update:modelValue",P);return l(Z,G({ref:c,type:"search",class:h("field",{"with-message":a.errorMessage}),border:!1,onBlur:B,onFocus:D,onClear:L,onKeypress:g,onClickInput:x,onClickLeftIcon:A,onClickRightIcon:F,"onUpdate:modelValue":k},a),C(s,["left-icon","right-icon"]))};return $({focus:R,blur:v}),()=>{var a;return l("div",{class:h({"show-action":o.showAction}),style:{background:o.background}},[(a=s.left)==null?void 0:a.call(s),l("div",{class:h("content",o.shape)},[r(),U()]),m()])}}});const se=q(oe);let p={};p.STATIC_SERVER="http://127.0.0.1:80";let b={};b.formatDate=function(o){const e=new Date(o),s=e.getFullYear();let n=e.getMonth()+1,t=e.getDate();return n=n<10?"0"+n:n,t=t<10?"0"+t:t,`${s}年${n}月${t}日`};const ce={name:"album",components:{TarBar:W},setup(){return{active:V("home")}},mounted(){this.pageList()},data(){return{searchValue:"",active:"",dataList:[],dateList:[],groupedByDate:{}}},methods:{search(){let{searchValue:o}=this,e=[];console.log(o),y.post({url:"/resourceFile/search",params:{keyword:o},success: s=>{s.data.data.forEach(t=>{t.file.url=p.STATIC_SERVER+t.file.url,t.file.previewUrl=p.STATIC_SERVER+t.file.previewUrl;let c=b.formatDate(t.createTime);console.log(c),e[c]||(e[c]=[]),e[c].push(t)}),console.log(e),this.groupedByDate=e,this.dateList=Object.keys(e)}})},pageList(o){let{groupedByDate:e}=this;y.post({url:"/resourceFile/list",params:{},success: s=>{let n=s.data.data;n.length,n.forEach(t=>{t.file.url=p.STATIC_SERVER+t.file.url,t.file.previewUrl=p.STATIC_SERVER+t.file.previewUrl;let c=b.formatDate(t.createTime);e[c]||(e[c]=[]),e[c].push(t)}),console.log(e),this.groupedByDate=e,this.dateList=Object.keys(e)},fail: s=>{console.log("error",s)}})}}},ne={class:"tabBar-app app"},re={action:"/",class:"search"},le={class:"monthColumn"},ie={class:"group-title"},ue={class:"imageGroup"},de={class:"imageContainer"};function he(o, e, s, n, t, c){const _=se,g=Q,f=Y("TarBar");return i(),u("div",ne,[d("div",re,[l(_,{modelValue:t.searchValue,"onUpdate:modelValue":e[1]||(e[1]= r=>t.searchValue=r),"show-action":"",placeholder:"请输入搜索关键词",onSearch:c.search},{action:z(()=>[d("div",{onClick:e[0]||(e[0]=(...r)=>c.search&&c.search(...r))},"搜索")]),_:1},8,["modelValue","onSearch"])]),(i(!0),u(E,null,T(t.dateList,(r, m)=>(i(),u("div",{key:m},[d("div",le,[d("div",ie,H(r),1),d("div",ue,[(i(!0),u(E,null,T(t.groupedByDate[r], v=>(i(),u("div",de,[l(g,{class:"image",fit:"cover",src:v.file.previewUrl},null,8,["src"])]))),256))])])]))),128)),l(f,{active:"search"})])}const ve=J(ce,[["render",he],["__scopeId","data-v-33ebc2b0"]]);export{ve as default};
