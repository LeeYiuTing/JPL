import{a0 as v,a6 as g,a7 as r,a1 as h,a2 as _,a as i,aa as l,ab as p,a3 as c,af as x,S as w,a4 as T,M as N,ac as K,ad as I,ae as b,a8 as A}from"./index-8c93c3fa.js";import{P as C}from"./index-e57386c2.js";import{k as B,N as S}from"./kana-808cd742.js";const E={name:"JpLearnTY",data(){return{kanaList:B,randomKanaList:[],audioPlayer:new Audio,target:{},rangeList:[],kanaType:0,rowNum:0,learnNum:0,kanaIndex:0}},mounted(){let a=this.$route.query;console.log("query",a),this.rowNum=Number(a.rowNum),this.kanaType=Number(a.kanaType),this.learnNum=5*this.rowNum,this.collectKana()},methods:{router(){return g},collectKana(){let a=this.kanaList,e=[];a.slice(0,this.rowNum).forEach(n=>{n.forEach(t=>{t.Hiragana&&e.push(t)})}),console.log(this.kanaType),e.forEach(n=>{this.kanaType===1||this.kanaType===3?n.kana=n.Hiragana:this.kanaType===2&&(n.kana=n.Katakana)}),e=r.shuffleArray(e),this.rangeList=e,this.next()},randomGetFourKana(){let{rangeList:a,target:e}=this,s=[];s.push(e);let n=()=>{let o=Math.floor(Math.random()*a.length);return a[o]},t=()=>{let o=n();s.includes(o)?t():s.push(o)};for(;s.length<4;)t();return s},next(){let{randomKanaList:a,rangeList:e,kanaIndex:s,learnNum:n}=this;s>=e.length?(console.log("全部完成"),this.kanaIndex+=1,r.showTips("全部完成 !","success"),setTimeout(()=>{g.back()},1e3)):(this.target=e[s],this.kanaIndex=s+1,a=this.randomGetFourKana(),this.randomKanaList=r.shuffleArray(a),this.playAudio())},playAudio(){let{audioPlayer:a,target:e}=this;a.src=e.audio,a.play().catch(s=>{r.showTips("首次请手动点击播放","success")})},clickKana(a){let{target:e}=this;a.Hiragana===e.Hiragana?(r.showNotify("回答正确","success"),r.showTips("前往下一个 !","loading"),setTimeout(()=>{this.next()},800)):(r.showTips("答错咯","fail"),this.playAudio())}}},u=a=>(K("data-v-4ed60ae1"),a=a(),I(),a),F={class:"JpLearn"},H=u(()=>l("div",{class:"form-title"},null,-1)),J=u(()=>l("div",{class:"form-title"},null,-1)),P={class:"step-Line"},q=u(()=>l("div",{class:"form-title"},null,-1)),G={class:"step-text"},M=u(()=>l("div",{class:"form-title"},null,-1)),V={class:"alias-layout"},Y=["onClick"];function j(a,e,s,n,t,o){const k=S,y=C,m=b,f=x,L=A;return h(),_("div",F,[i(k,{title:"假名听音","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=d=>o.router().back())}),H,J,l("div",P,[i(y,{inactive:"",percentage:((t.kanaIndex-1)/t.rangeList.length*100).toFixed(2)},null,8,["percentage"])]),q,l("div",G,p(t.kanaIndex>t.rangeList.length?t.rangeList.length:t.kanaIndex)+"/"+p(t.rangeList.length),1),M,i(f,{justify:"center"},{default:c(()=>[i(m,null,{default:c(()=>[l("div",V,[(h(!0),_(w,null,T(t.randomKanaList,(d,z)=>(h(),_("div",{class:"alias-text",onClick:D=>o.clickKana(d)},p(d.kana),9,Y))),256))])]),_:1})]),_:1}),i(f,{class:"lock-to-bottom",justify:"center",gutter:"100"},{default:c(()=>[i(m,{onClick:o.playAudio},{default:c(()=>[i(L,{round:"",type:"success",size:"large",class:"lock-to-bottom"},{default:c(()=>[N("重听")]),_:1})]),_:1},8,["onClick"])]),_:1})])}const U=v(E,[["render",j],["__scopeId","data-v-4ed60ae1"]]);export{U as default};
