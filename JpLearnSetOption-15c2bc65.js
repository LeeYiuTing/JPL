import{g as Ye,c as O,e as U,r as Xe,d as A,u as Qe,a as l,m as j,n as E,t as Q,b as N,i as R,I as z,w as D,f as Ze,s as pe,h as et,j as tt,k as nt,l as at,o as lt,p as L,q as le,F as ot,v as T,x as F,y as Se,z as it,C as rt,A as oe,B as X,D as Ce,E as ct,G as me,H as st,J as ut,K as ee,L as W,M as Ve,N as dt,O as ft,P as we,Q as mt,R as xe,S as ae,T as gt,U as bt,_ as ht,V as G,W as te,X as w,Y as ge,Z as vt,$ as be,a0 as he,a1 as kt,a2 as ve,a3 as K,a4 as _t,a5 as yt,a6 as St,a7 as Ct,a8 as Vt}from"./index-068e6b32.js";import{k as wt,N as xt}from"./kana-5c458dba.js";let Tt=0;function It(){const e=Ye(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++Tt}`}const[Lt,$]=O("cell"),Te={tag:j("div"),icon:String,size:String,title:E,value:E,label:E,center:Boolean,isLink:Boolean,border:Q,iconPrefix:String,valueClass:N,labelClass:N,titleClass:N,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Pt=U({},Te,Xe);var Bt=A({name:Lt,props:Pt,setup(e,{slots:n}){const r=Qe(),a=()=>{if(n.label||R(e.label))return l("div",{class:[$("label"),e.labelClass]},[n.label?n.label():e.label])},i=()=>{var c;if(n.title||R(e.title)){const f=(c=n.title)==null?void 0:c.call(n);return Array.isArray(f)&&f.length===0?void 0:l("div",{class:[$("title"),e.titleClass],style:e.titleStyle},[f||l("span",null,[e.title]),a()])}},o=()=>{const c=n.value||n.default;if(c||R(e.value))return l("div",{class:[$("value"),e.valueClass]},[c?c():l("span",null,[e.value])])},h=()=>{if(n.icon)return n.icon();if(e.icon)return l(z,{name:e.icon,class:$("left-icon"),classPrefix:e.iconPrefix},null)},g=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const c=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return l(z,{name:c,class:$("right-icon")},null)}};return()=>{var c;const{tag:f,size:m,center:k,border:d,isLink:V,required:S}=e,_=(c=e.clickable)!=null?c:V,v={center:k,required:!!S,clickable:_,borderless:!d};return m&&(v[m]=!!m),l(f,{class:$(v),role:_?"button":void 0,tabindex:_?0:void 0,onClick:r},{default:()=>{var C;return[h(),i(),o(),g(),(C=n.extra)==null?void 0:C.call(n)]}})}}});const Ie=D(Bt);function Le(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Rt(e,n){if(Le(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function Et(e,n){return new Promise(r=>{const a=n.validator(e,n);if(et(a)){a.then(r);return}r(a)})}function ke(e,n){const{message:r}=n;return tt(r)?r(e,n):r||""}function qt({target:e}){e.composing=!0}function _e({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Mt(e,n){const r=Ze();e.style.height="auto";let a=e.scrollHeight;if(nt(n)){const{maxHeight:i,minHeight:o}=n;i!==void 0&&(a=Math.min(a,i)),o!==void 0&&(a=Math.max(a,o))}a&&(e.style.height=`${a}px`,pe(r))}function Nt(e,n){return e==="number"&&(e="text",n??(n="decimal")),e==="digit"&&(e="tel",n??(n="numeric")),{type:e,inputmode:n}}function B(e){return[...e].length}function ne(e,n){return[...e].slice(0,n).join("")}const[Ot,x]=O("field"),At={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:E,max:Number,min:Number,formatter:Function,clearIcon:j("clear"),modelValue:at(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:j("focus"),formatTrigger:j("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},$t=U({},Te,At,{rows:E,type:j("text"),rules:Array,autosize:[Boolean,Object],labelWidth:E,labelClass:N,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var zt=A({name:Ot,props:$t,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:r}){const a=It(),i=lt({status:"unvalidated",focused:!1,validateMessage:""}),o=L(),h=L(),g=L(),{parent:c}=le(ot),f=()=>{var t;return String((t=e.modelValue)!=null?t:"")},m=t=>{if(R(e[t]))return e[t];if(c&&R(c.props[t]))return c.props[t]},k=T(()=>{const t=m("readonly");if(e.clearable&&!t){const s=f()!=="",u=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return s&&u}return!1}),d=T(()=>g.value&&r.input?g.value():e.modelValue),V=T(()=>{var t;const s=m("required");return s==="auto"?(t=e.rules)==null?void 0:t.some(u=>u.required):s}),S=t=>t.reduce((s,u)=>s.then(()=>{if(i.status==="failed")return;let{value:b}=d;if(u.formatter&&(b=u.formatter(b,u)),!Rt(b,u)){i.status="failed",i.validateMessage=ke(b,u);return}if(u.validator)return Le(b)&&u.validateEmpty===!1?void 0:Et(b,u).then(y=>{y&&typeof y=="string"?(i.status="failed",i.validateMessage=y):y===!1&&(i.status="failed",i.validateMessage=ke(b,u))})}),Promise.resolve()),_=()=>{i.status="unvalidated",i.validateMessage=""},v=()=>n("endValidate",{status:i.status,message:i.validateMessage}),C=(t=e.rules)=>new Promise(s=>{_(),t?(n("startValidate"),S(t).then(()=>{i.status==="failed"?(s({name:e.name,message:i.validateMessage}),v()):(i.status="passed",s(),v())})):s()}),Z=t=>{if(c&&e.rules){const{validateTrigger:s}=c.props,u=me(s).includes(t),b=e.rules.filter(y=>y.trigger?me(y.trigger).includes(t):u);b.length&&C(b)}},Ee=t=>{var s;const{maxlength:u}=e;if(R(u)&&B(t)>+u){const b=f();if(b&&B(b)===+u)return b;const y=(s=o.value)==null?void 0:s.selectionEnd;if(i.focused&&y){const q=[...t],M=q.length-+u;return q.splice(y-M,M),q.join("")}return ne(t,+u)}return t},J=(t,s="onChange")=>{var u,b;const y=t;t=Ee(t);const q=B(y)-B(t);if(e.type==="number"||e.type==="digit"){const I=e.type==="number";t=st(t,I,I),s==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)&&(t=ut(+t,(u=e.min)!=null?u:-1/0,(b=e.max)!=null?b:1/0).toString())}let M=0;if(e.formatter&&s===e.formatTrigger){const{formatter:I,maxlength:P}=e;if(t=I(t),R(P)&&B(t)>+P&&(t=ne(t,+P)),o.value&&i.focused){const{selectionEnd:Y}=o.value,fe=ne(y,Y);M=B(I(fe))-B(fe)}}if(o.value&&o.value.value!==t)if(i.focused){let{selectionStart:I,selectionEnd:P}=o.value;if(o.value.value=t,R(I)&&R(P)){const Y=B(t);q?(I-=q,P-=q):M&&(I+=M,P+=M),o.value.setSelectionRange(Math.min(I,Y),Math.min(P,Y))}}else o.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},qe=t=>{t.target.composing||J(t.target.value)},p=()=>{var t;return(t=o.value)==null?void 0:t.blur()},ce=()=>{var t;return(t=o.value)==null?void 0:t.focus()},H=()=>{const t=o.value;e.type==="textarea"&&e.autosize&&t&&Mt(t,e.autosize)},Me=t=>{i.focused=!0,n("focus",t),X(H),m("readonly")&&p()},Ne=t=>{i.focused=!1,J(f(),"onBlur"),n("blur",t),!m("readonly")&&(Z("onBlur"),X(H),dt())},se=t=>n("clickInput",t),Oe=t=>n("clickLeftIcon",t),Ae=t=>n("clickRightIcon",t),$e=t=>{ee(t),n("update:modelValue",""),n("clear",t)},ue=T(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&i.status==="failed")return!0}),ze=T(()=>{const t=m("labelWidth"),s=m("labelAlign");if(t&&s!=="top")return{width:F(t)}}),De=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&ee(t),e.type==="search"&&p()),n("keypress",t)},de=()=>e.id||`${a}-input`,Ge=()=>i.status,je=()=>{const t=x("control",[m("inputAlign"),{error:ue.value,custom:!!r.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(r.input)return l("div",{class:t,onClick:se},[r.input()]);const s={id:de(),ref:o,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:m("disabled"),readonly:m("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${a}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:Ne,onFocus:Me,onInput:qe,onClick:se,onChange:_e,onKeypress:De,onCompositionend:_e,onCompositionstart:qt};return e.type==="textarea"?l("textarea",W(s,{inputmode:e.inputmode}),null):l("input",W(Nt(e.type,e.inputmode),s),null)},Fe=()=>{const t=r["left-icon"];if(e.leftIcon||t)return l("div",{class:x("left-icon"),onClick:Oe},[t?t():l(z,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},We=()=>{const t=r["right-icon"];if(e.rightIcon||t)return l("div",{class:x("right-icon"),onClick:Ae},[t?t():l(z,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ke=()=>{if(e.showWordLimit&&e.maxlength){const t=B(f());return l("div",{class:x("word-limit")},[l("span",{class:x("word-num")},[t]),Ve("/"),e.maxlength])}},Ue=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const s=r["error-message"],u=m("errorMessageAlign");return l("div",{class:x("error-message",u)},[s?s({message:t}):t])}},Je=()=>{const t=m("labelWidth"),s=m("labelAlign"),u=m("colon")?":":"";if(r.label)return[r.label(),u];if(e.label)return l("label",{id:`${a}-label`,for:r.input?void 0:de(),"data-allow-mismatch":"attribute",onClick:b=>{ee(b),ce()},style:s==="top"&&t?{width:F(t)}:void 0},[e.label+u])},He=()=>[l("div",{class:x("body")},[je(),k.value&&l(z,{ref:h,name:e.clearIcon,class:x("clear")},null),We(),r.button&&l("div",{class:x("button")},[r.button()])]),Ke(),Ue()];return Se({blur:p,focus:ce,validate:C,formValue:d,resetValidation:_,getValidationStatus:Ge}),it(rt,{customValue:g,resetValidation:_,validateWithTrigger:Z}),oe(()=>e.modelValue,()=>{J(f()),_(),Z("onChange"),X(H)}),Ce(()=>{J(f(),e.formatTrigger),X(H)}),ct("touchstart",$e,{target:T(()=>{var t;return(t=h.value)==null?void 0:t.$el})}),()=>{const t=m("disabled"),s=m("labelAlign"),u=Fe(),b=()=>{const y=Je();return s==="top"?[u,y].filter(Boolean):y||[]};return l(Ie,{size:e.size,class:x({error:ue.value,disabled:t,[`label-${s}`]:s}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ze.value,valueClass:x("value"),titleClass:[x("label",[s,{required:V.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:u&&s!=="top"?()=>u:null,title:b,value:He,extra:r.extra})}}});const Dt=D(zt),[Pe,Gt]=O("radio-group"),jt={shape:String,disabled:Boolean,iconSize:E,direction:String,modelValue:N,checkedColor:String},Be=Symbol(Pe);var Ft=A({name:Pe,props:jt,emits:["change","update:modelValue"],setup(e,{emit:n,slots:r}){const{linkChildren:a}=ft(Be),i=o=>n("update:modelValue",o);return oe(()=>e.modelValue,o=>n("change",o)),a({props:e,updateValue:i}),we(()=>e.modelValue),()=>{var o;return l("div",{class:Gt([e.direction]),role:"radiogroup"},[(o=r.default)==null?void 0:o.call(r)])}}});const Wt=D(Ft),[Kt,kn]=O("checkbox-group"),Ut=Symbol(Kt),ie={name:N,disabled:Boolean,iconSize:E,modelValue:N,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Re=A({props:U({},ie,{bem:mt(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:Q,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:n,slots:r}){const a=L(),i=d=>{if(e.parent&&e.bindGroup)return e.parent.props[d]},o=T(()=>{if(e.parent&&e.bindGroup){const d=i("disabled")||e.disabled;if(e.role==="checkbox"){const V=i("modelValue").length,S=i("max"),_=S&&V>=+S;return d||_&&!e.checked}return d}return e.disabled}),h=T(()=>i("direction")),g=T(()=>{const d=e.checkedColor||i("checkedColor");if(d&&e.checked&&!o.value)return{borderColor:d,backgroundColor:d}}),c=T(()=>e.shape||i("shape")||"round"),f=d=>{const{target:V}=d,S=a.value,_=S===V||(S==null?void 0:S.contains(V));!o.value&&(_||!e.labelDisabled)&&n("toggle"),n("click",d)},m=()=>{var d,V;const{bem:S,checked:_,indeterminate:v}=e,C=e.iconSize||i("iconSize");return l("div",{ref:a,class:S("icon",[c.value,{disabled:o.value,checked:_,indeterminate:v}]),style:c.value!=="dot"?{fontSize:F(C)}:{width:F(C),height:F(C),borderColor:(d=g.value)==null?void 0:d.borderColor}},[r.icon?r.icon({checked:_,disabled:o.value}):c.value!=="dot"?l(z,{name:v?"minus":"success",style:g.value},null):l("div",{class:S("icon--dot__icon"),style:{backgroundColor:(V=g.value)==null?void 0:V.backgroundColor}},null)])},k=()=>{const{checked:d}=e;if(r.default)return l("span",{class:e.bem("label",[e.labelPosition,{disabled:o.value}])},[r.default({checked:d,disabled:o.value})])};return()=>{const d=e.labelPosition==="left"?[k(),m()]:[m(),k()];return l("div",{role:e.role,class:e.bem([{disabled:o.value,"label-disabled":e.labelDisabled},h.value]),tabindex:o.value?void 0:0,"aria-checked":e.checked,onClick:f},[d])}}});const Jt=U({},ie,{shape:String}),[Ht,Yt]=O("radio");var Xt=A({name:Ht,props:Jt,emits:["update:modelValue"],setup(e,{emit:n,slots:r}){const{parent:a}=le(Be),i=()=>(a?a.props.modelValue:e.modelValue)===e.name,o=()=>{a?a.updateValue(e.name):n("update:modelValue",e.name)};return()=>l(Re,W({bem:Yt,role:"radio",parent:a,checked:i(),onToggle:o},e),xe(r,["default","icon"]))}});const Qt=D(Xt),[Zt,pt]=O("checkbox"),en=U({},ie,{shape:String,bindGroup:Q,indeterminate:{type:Boolean,default:null}});var tn=A({name:Zt,props:en,emits:["change","update:modelValue"],setup(e,{emit:n,slots:r}){const{parent:a}=le(Ut),i=g=>{const{name:c}=e,{max:f,modelValue:m}=a.props,k=m.slice();if(g)!(f&&k.length>=+f)&&!k.includes(c)&&(k.push(c),e.bindGroup&&a.updateValue(k));else{const d=k.indexOf(c);d!==-1&&(k.splice(d,1),e.bindGroup&&a.updateValue(k))}},o=T(()=>a&&e.bindGroup?a.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),h=(g=!o.value)=>{a&&e.bindGroup?i(g):n("update:modelValue",g),e.indeterminate!==null&&n("change",g)};return oe(()=>e.modelValue,g=>{e.indeterminate===null&&n("change",g)}),Se({toggle:h,props:e,checked:o}),we(()=>e.modelValue),()=>l(Re,W({bem:pt,role:"checkbox",parent:a,checked:o.value,onToggle:h},e),xe(r,["default","icon"]))}});const nn=D(tn),[an,ye]=O("cell-group"),ln={title:String,inset:Boolean,border:Q};var on=A({name:an,inheritAttrs:!1,props:ln,setup(e,{slots:n,attrs:r}){const a=()=>{var o;return l("div",W({class:[ye({inset:e.inset}),{[bt]:e.border&&!e.inset}]},r,gt()),[(o=n.default)==null?void 0:o.call(n)])},i=()=>l("div",{class:ye("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?l(ae,null,[i(),a()]):a()}});const rn=D(on),cn={name:"JpLearnSetOption",setup(){const e=L(1),n=L(1),r=L(1),a=L(!1),i=L(wt),o=L({0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1}),h=vt();return Ce(()=>{console.log(h.query),h.query.kanaType&&(e.value=Number(h.query.kanaType)),h.query.rowNum&&(n.value=Number(h.query.rowNum)),h.query.quesType&&(r.value=Number(h.query.quesType))}),{kanaType:e,rowNum:n,obfuscation:a,kanaList:i,quesType:r,selectRow:o,goLearn:()=>{let f=[];if(Object.keys(o.value).forEach(d=>{o.value[d]&&f.push(Number(d))}),f.length===0){be.showTips("请选择行");return}let m=f.join(","),k="/JpLearnTY";r.value===2&&(k="/JpLearnTX"),he.push({query:{kanaType:e.value,rowNum:n.value,quesType:r.value,rowIndex:m}}),be.showTips("跳转中...","loading"),setTimeout(()=>{he.push({path:k,query:{kanaType:e.value,rowNum:n.value,rowIndex:m}})},800)},changeSelectRow:f=>{console.log(f),o.value[f]=!o.value[f]}}}},re=e=>(yt("data-v-75a7c8bb"),e=e(),St(),e),sn={class:"JpLearnSetOption"},un=re(()=>K("div",{class:"form-title"},"类型选择",-1)),dn=re(()=>K("div",{class:"form-title"},"题型",-1)),fn=re(()=>K("div",{class:"form-title"},"行选择",-1)),mn={class:"kana-list"},gn={class:"show-kana"};function bn(e,n,r,a,i,o){const h=xt,g=Qt,c=Ie,f=rn,m=Wt,k=Ct,d=Vt,V=nn,S=Dt,_=kt;return G(),te("div",sn,[l(h,{title:"假名闯关设置"}),un,l(m,{modelValue:a.kanaType,"onUpdate:modelValue":n[2]||(n[2]=v=>a.kanaType=v)},{default:w(()=>[l(f,{inset:""},{default:w(()=>[l(c,{title:"平假",clickable:"",onClick:n[0]||(n[0]=v=>a.kanaType=1)},{"right-icon":w(()=>[l(g,{name:1})]),_:1}),l(c,{title:"片假",clickable:"",onClick:n[1]||(n[1]=v=>a.kanaType=2)},{"right-icon":w(()=>[l(g,{name:2})]),_:1})]),_:1})]),_:1},8,["modelValue"]),dn,l(m,{modelValue:a.quesType,"onUpdate:modelValue":n[5]||(n[5]=v=>a.quesType=v)},{default:w(()=>[l(f,{inset:""},{default:w(()=>[l(c,{title:"听音",clickable:"",onClick:n[3]||(n[3]=v=>a.quesType=1)},{"right-icon":w(()=>[l(g,{name:1})]),_:1}),l(c,{title:"听写",clickable:"",onClick:n[4]||(n[4]=v=>a.quesType=2)},{"right-icon":w(()=>[l(g,{name:2})]),_:1})]),_:1})]),_:1},8,["modelValue"]),fn,l(f,{inset:""},{default:w(()=>[(G(!0),te(ae,null,ge(a.kanaList.length-1,v=>(G(),ve(S,null,{extra:w(()=>[K("div",mn,[l(d,{gutter:"28",justify:"space-between"},{default:w(()=>[(G(!0),te(ae,null,ge(a.kanaList[v],C=>(G(),ve(k,null,{default:w(()=>[K("div",gn,_t(a.kanaType===1?C.Hiragana:C.Katakana),1)]),_:2},1024))),256))]),_:2},1024),l(V,{modelValue:a.selectRow[v],"onUpdate:modelValue":C=>a.selectRow[v]=C},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),256))]),_:1}),l(_,{round:"",type:"success",size:"large",onClick:a.goLearn,class:"lock-to-bottom"},{default:w(()=>[Ve("Go!")]),_:1},8,["onClick"])])}const _n=ht(cn,[["render",bn],["__scopeId","data-v-75a7c8bb"]]);export{_n as default};
