import{_ as v,a0 as g,$ as r,V as h,W as _,a as i,a2 as l,a4 as p,X as c,a8 as x,S as w,Y as T,M as N,a5 as K,a6 as I,a7 as b,a1 as A}from"./index-18b25ed7.js";import{P as C}from"./index-a4450d78.js";import{k as B,N as E}from"./kana-13e22726.js";const S={name:"JpLearnTY",data(){return{kanaList:B,randomKanaList:[],audioPlayer:new Audio,target:{},rangeList:[],kanaType:0,rowNum:0,learnNum:0,kanaIndex:0}},mounted(){let a=this.$route.query;console.log("query",a),this.rowNum=Number(a.rowNum),this.kanaType=Number(a.kanaType),this.learnNum=5*this.rowNum;let e=a.rowIndex.split(","),t=[];e.forEach(n=>{n=Number(n),t.push(this.kanaList[n])}),this.kanaList=t,this.collectKana()},methods:{router(){return g},collectKana(){let a=this.kanaList,e=[];a.forEach(t=>{t.forEach(n=>{n.Hiragana&&e.push(n)})}),console.log(this.kanaType),e.forEach(t=>{this.kanaType===1||this.kanaType===3?t.kana=t.Hiragana:this.kanaType===2&&(t.kana=t.Katakana)}),e=r.shuffleArray(e),this.rangeList=e,this.next()},randomGetFourKana(){let{rangeList:a,target:e}=this,t=[];t.push(e);let n=()=>{let o=Math.floor(Math.random()*a.length);return a[o]},s=()=>{let o=n();t.includes(o)?s():t.push(o)};for(;t.length<4;)s();return t},next(){let{randomKanaList:a,rangeList:e,kanaIndex:t,learnNum:n}=this;t>=e.length?(console.log("全部完成"),this.kanaIndex+=1,r.showTips("全部完成 !","success"),setTimeout(()=>{g.back()},1e3)):(this.target=e[t],this.kanaIndex=t+1,a=this.randomGetFourKana(),this.randomKanaList=r.shuffleArray(a),this.playAudio())},playAudio(){let{audioPlayer:a,target:e}=this;a.src=e.audio,a.play().catch(t=>{r.showTips("首次请手动点击播放","success")})},clickKana(a){let{target:e}=this;a.Hiragana===e.Hiragana?(r.showNotify("回答正确","success"),r.showTips("前往下一个 !","loading"),setTimeout(()=>{this.next()},800)):(r.showTips("答错咯","fail"),this.playAudio())}}},u=a=>(K("data-v-0a9ccb58"),a=a(),I(),a),F={class:"JpLearn"},H=u(()=>l("div",{class:"form-title"},null,-1)),J=u(()=>l("div",{class:"form-title"},null,-1)),P={class:"step-Line"},V=u(()=>l("div",{class:"form-title"},null,-1)),Y={class:"step-text"},q=u(()=>l("div",{class:"form-title"},null,-1)),G={class:"alias-layout"},M=["onClick"];function j(a,e,t,n,s,o){const k=E,y=C,m=b,f=x,L=A;return h(),_("div",F,[i(k,{title:"假名听音","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=d=>o.router().back())}),H,J,l("div",P,[i(y,{inactive:"",percentage:((s.kanaIndex-1)/s.rangeList.length*100).toFixed(2)},null,8,["percentage"])]),V,l("div",Y,p(s.kanaIndex>s.rangeList.length?s.rangeList.length:s.kanaIndex)+"/"+p(s.rangeList.length),1),q,i(f,{justify:"center"},{default:c(()=>[i(m,null,{default:c(()=>[l("div",G,[(h(!0),_(w,null,T(s.randomKanaList,(d,z)=>(h(),_("div",{class:"alias-text",onClick:D=>o.clickKana(d)},p(d.kana),9,M))),256))])]),_:1})]),_:1}),i(f,{class:"lock-to-bottom",justify:"center",gutter:"100"},{default:c(()=>[i(m,{onClick:o.playAudio},{default:c(()=>[i(L,{round:"",type:"success",size:"large",class:"lock-to-bottom"},{default:c(()=>[N("重听")]),_:1})]),_:1},8,["onClick"])]),_:1})])}const O=v(S,[["render",j],["__scopeId","data-v-0a9ccb58"]]);export{O as default};
